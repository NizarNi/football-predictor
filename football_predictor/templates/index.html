<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Prediction - Safe Bet Analyzer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1e3a8a;
            --secondary-color: #0ea5e9;
            --accent-color: #f59e0b;
            --background-color: #f8fafc;
            --card-bg: #ffffff;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .navbar {
            background-color: var(--primary-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: white !important;
        }
        
        .card {
            border-radius: 10px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            background-color: var(--card-bg);
            margin-bottom: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: #152b63;
            border-color: #152b63;
        }
        
        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .match-card {
            cursor: pointer;
        }
        
        .match-card:hover {
            border-color: var(--secondary-color);
        }
        
        .match-card.popular-match {
            border: 2px solid #f59e0b;
            background: linear-gradient(135deg, #fff9e6 0%, #ffffff 100%);
        }
        
        .match-card.popular-match::before {
            content: "‚≠ê POPULAR";
            position: absolute;
            top: -10px;
            right: 10px;
            background: #f59e0b;
            color: white;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .match-card.arbitrage-match {
            border: 2px solid #10b981;
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }
        
        .match-card.arbitrage-match::after {
            content: "üí∞ ARBITRAGE";
            position: absolute;
            top: -10px;
            left: 10px;
            background: #10b981;
            color: white;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .match-card {
            position: relative;
        }
        
        .prediction-badge {
            font-size: 1rem;
            padding: 8px 12px;
            border-radius: 20px;
        }
        
        .safe-bet {
            background-color: #10b981;
            color: white;
        }
        
        .risky-bet {
            background-color: #f59e0b;
            color: white;
        }
        
        .very-risky {
            background-color: #ef4444;
            color: white;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
        
        .team-logo {
            width: 30px;
            height: 30px;
            object-fit: contain;
            margin-right: 10px;
        }
        
        .odds-table {
            font-size: 0.9rem;
        }
        
        .odds-table th, .odds-table td {
            padding: 8px;
        }
        
        .stats-bar {
            height: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }
        
        .home-stats {
            background-color: var(--primary-color);
        }
        
        .away-stats {
            background-color: var(--secondary-color);
        }
        
        .exact-score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .exact-score-item:last-child {
            border-bottom: none;
        }
        
        .probability-bar {
            height: 20px;
            border-radius: 10px;
            background-color: #e2e8f0;
            overflow: hidden;
            margin: 5px 0;
        }
        
        .probability-fill {
            height: 100%;
            background-color: var(--secondary-color);
        }
        
        .league-badge {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            background-color: #e2e8f0;
            color: var(--text-color);
            margin-right: 5px;
        }
        
        .match-date {
            font-size: 0.8rem;
            color: #64748b;
        }
        
        .analysis-section {
            background-color: #f1f5f9;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .analysis-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .autocomplete-dropdown {
            position: absolute;
            z-index: 9999;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            width: calc(100% - 12px);
            margin-top: 2px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .autocomplete-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .autocomplete-item:hover {
            background-color: #f8f9fa;
        }
        
        .autocomplete-item .team-name {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .autocomplete-item .team-alias {
            font-size: 0.85rem;
            color: #64748b;
            margin-left: 5px;
        }
        
        .autocomplete-item .team-league {
            font-size: 0.75rem;
            color: #94a3b8;
            display: block;
        }
        
        @media (max-width: 768px) {
            .card-header {
                font-size: 1rem;
            }
            
            .prediction-badge {
                font-size: 0.8rem;
                padding: 5px 8px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-futbol me-2"></i>
                Football Prediction - Safe Bet Analyzer
            </a>
        </div>
    </nav>

    <div class="container">
        <div class="row mb-4">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-search me-2"></i> Find Matches
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <h5>Search by Team</h5>
                                <div style="position: relative;">
                                    <div class="input-group">
                                        <input type="text" id="team-search" class="form-control" placeholder="Enter team name or nickname (PSG, Barca, Bayern)..." autocomplete="off">
                                        <button class="btn btn-primary" id="search-btn">
                                            <i class="fas fa-search"></i> Search
                                        </button>
                                    </div>
                                    <div id="autocomplete-dropdown" class="autocomplete-dropdown" style="display: none;"></div>
                                </div>
                                <small class="text-muted">Press Enter or click Search to find matches</small>
                            </div>
                            <div class="col-md-6">
                                <h5>Browse Upcoming Matches</h5>
                                <div class="d-flex flex-wrap">
                                    <button class="btn btn-outline-primary m-1" data-league="PL">Premier League</button>
                                    <button class="btn btn-outline-primary m-1" data-league="PD">La Liga</button>
                                    <button class="btn btn-outline-primary m-1" data-league="BL1">Bundesliga</button>
                                    <button class="btn btn-outline-primary m-1" data-league="SA">Serie A</button>
                                    <button class="btn btn-outline-primary m-1" data-league="FL1">Ligue 1</button>
                                    <button class="btn btn-outline-primary m-1" data-league="CL">Champions League</button>
                                    <button class="btn btn-outline-primary m-1" data-league="EL">Europa League</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div id="matches-container">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-calendar-alt me-2"></i> Matches
                        </div>
                        <div class="card-body">
                            <div id="matches-list">
                                <div class="loading">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div id="prediction-container" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-line me-2"></i> Match Prediction
                        </div>
                        <div class="card-body">
                            <div id="match-details">
                                <h4 id="match-teams" class="mb-3"></h4>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span id="match-league" class="league-badge"></span>
                                    <span id="match-date" class="match-date"></span>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-12 mb-3">
                                    <div class="card">
                                        <div class="card-header bg-primary text-white">
                                            <i class="fas fa-trophy me-2"></i> 1X2 Prediction
                                        </div>
                                        <div class="card-body">
                                            <div id="prediction-1x2">
                                                <div class="loading">
                                                    <div class="spinner-border text-primary" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 mb-3">
                                    <div class="card">
                                        <div class="card-header bg-secondary text-white">
                                            <i class="fas fa-chart-line me-2"></i> Match Context
                                        </div>
                                        <div class="card-body">
                                            <div id="match-context">
                                                <p class="text-muted">Select a match to view context</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12 mb-3">
                                    <div class="card">
                                        <div class="card-header bg-primary text-white">
                                            <i class="fas fa-exchange-alt me-2"></i> Over/Under Predictions
                                        </div>
                                        <div class="card-body">
                                            <div id="prediction-over-under">
                                                <div class="text-center">
                                                    <button id="load-over-under-btn" class="btn btn-primary">
                                                        <i class="fas fa-chart-bar me-2"></i> Show Over/Under Odds
                                                    </button>
                                                    <p class="text-muted mt-2 small">Click to fetch detailed over/under predictions from bookmakers</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header bg-primary text-white">
                                            <i class="fas fa-chart-bar me-2"></i> Betting Analysis
                                        </div>
                                        <div class="card-body">
                                            <div id="betting-analysis">
                                                <div class="text-center">
                                                    <button onclick="loadBettingAnalysis()" class="btn btn-primary">
                                                        <i class="fas fa-coins me-2"></i> Show Betting Analysis
                                                    </button>
                                                    <p class="text-muted mt-2 small">View arbitrage opportunities, best odds, and betting tips</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-3 mt-5">
        <div class="container">
            <p class="mb-0">¬© 2025 Football Prediction - Safe Bet Analyzer</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const teamSearchInput = document.getElementById('team-search');
            const searchBtn = document.getElementById('search-btn');
            const leagueButtons = document.querySelectorAll('[data-league]');
            const matchesList = document.getElementById('matches-list');
            const predictionContainer = document.getElementById('prediction-container');
            const matchTeams = document.getElementById('match-teams');
            const matchLeague = document.getElementById('match-league');
            const matchDate = document.getElementById('match-date');
            const prediction1x2 = document.getElementById('prediction-1x2');
            const predictionOverUnder = document.getElementById('prediction-over-under');
            const bettingAnalysis = document.getElementById('betting-analysis');
            const matchContext = document.getElementById('match-context');
            
            let currentMatchData = null;
            
            // Comprehensive team database with nicknames and aliases (unique aliases only)
            const teamDatabase = [
                { name: "Arsenal", aliases: ["Gunners", "AFC"], league: "Premier League" },
                { name: "Liverpool", aliases: ["Reds", "LFC"], league: "Premier League" },
                { name: "Manchester United", aliases: ["Man Utd", "Man United", "United", "Red Devils", "MUFC"], league: "Premier League" },
                { name: "Manchester City", aliases: ["Man City", "City", "Citizens", "MCFC"], league: "Premier League" },
                { name: "Chelsea", aliases: ["Blues", "CFC"], league: "Premier League" },
                { name: "Tottenham", aliases: ["Spurs", "Tottenham Hotspur", "THFC"], league: "Premier League" },
                { name: "Newcastle", aliases: ["Newcastle United", "Magpies", "NUFC"], league: "Premier League" },
                { name: "Aston Villa", aliases: ["Villa", "AVFC"], league: "Premier League" },
                { name: "Brighton", aliases: ["Brighton & Hove Albion", "Seagulls", "BHAFC"], league: "Premier League" },
                { name: "West Ham", aliases: ["West Ham United", "Hammers", "WHUFC"], league: "Premier League" },
                { name: "Barcelona", aliases: ["Barca", "Bar√ßa", "Blaugrana"], league: "La Liga" },
                { name: "Real Madrid", aliases: ["Madrid", "Real", "Los Blancos", "RM"], league: "La Liga" },
                { name: "Atletico Madrid", aliases: ["Atleti", "Atletico", "ATM"], league: "La Liga" },
                { name: "Sevilla", aliases: ["SFC"], league: "La Liga" },
                { name: "Valencia", aliases: ["VCF"], league: "La Liga" },
                { name: "Real Betis", aliases: ["Betis"], league: "La Liga" },
                { name: "Bayern Munich", aliases: ["Bayern", "FCB", "FC Bayern", "Die Roten"], league: "Bundesliga" },
                { name: "Borussia Dortmund", aliases: ["Dortmund", "BVB", "Die Schwarzgelben"], league: "Bundesliga" },
                { name: "RB Leipzig", aliases: ["Leipzig", "RBL"], league: "Bundesliga" },
                { name: "Bayer Leverkusen", aliases: ["Leverkusen", "B04"], league: "Bundesliga" },
                { name: "Juventus", aliases: ["Juve", "Bianconeri", "Old Lady"], league: "Serie A" },
                { name: "Inter Milan", aliases: ["Inter", "Internazionale", "Nerazzurri"], league: "Serie A" },
                { name: "AC Milan", aliases: ["Milan", "Rossoneri", "ACM"], league: "Serie A" },
                { name: "Roma", aliases: ["AS Roma", "Giallorossi"], league: "Serie A" },
                { name: "Napoli", aliases: ["SSC Napoli", "Partenopei"], league: "Serie A" },
                { name: "Lazio", aliases: ["SS Lazio", "Biancocelesti"], league: "Serie A" },
                { name: "Paris Saint Germain", aliases: ["PSG", "Paris SG", "Paris"], league: "Ligue 1" },
                { name: "Marseille", aliases: ["OM", "Olympique Marseille"], league: "Ligue 1" },
                { name: "Lyon", aliases: ["Olympique Lyon", "OL"], league: "Ligue 1" },
                { name: "Monaco", aliases: ["AS Monaco", "ASM"], league: "Ligue 1" },
                { name: "Lille", aliases: ["LOSC"], league: "Ligue 1" }
            ];
            
            const autocompleteDropdown = document.getElementById('autocomplete-dropdown');
            
            // Autocomplete functionality
            teamSearchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length < 2) {
                    autocompleteDropdown.style.display = 'none';
                    return;
                }
                
                // Find matching teams
                const matches = teamDatabase.filter(team => {
                    const nameMatch = team.name.toLowerCase().includes(query);
                    const aliasMatch = team.aliases.some(alias => alias.toLowerCase().includes(query));
                    return nameMatch || aliasMatch;
                }).slice(0, 8); // Limit to 8 results
                
                if (matches.length > 0) {
                    autocompleteDropdown.innerHTML = matches.map(team => {
                        const matchedAlias = team.aliases.find(alias => alias.toLowerCase().includes(query));
                        const displayAlias = matchedAlias ? `<span class="team-alias">(${matchedAlias})</span>` : '';
                        
                        return `
                            <div class="autocomplete-item" data-team="${team.name}">
                                <span class="team-name">${team.name}</span>
                                ${displayAlias}
                                <span class="team-league">${team.league}</span>
                            </div>
                        `;
                    }).join('');
                    
                    autocompleteDropdown.style.display = 'block';
                    
                    // Add click listeners to autocomplete items
                    document.querySelectorAll('.autocomplete-item').forEach(item => {
                        item.addEventListener('click', function() {
                            const teamName = this.getAttribute('data-team');
                            teamSearchInput.value = teamName;
                            autocompleteDropdown.style.display = 'none';
                            searchTeam();
                        });
                    });
                } else {
                    autocompleteDropdown.style.display = 'none';
                }
            });
            
            // Hide autocomplete when clicking outside
            document.addEventListener('click', function(e) {
                if (!teamSearchInput.contains(e.target) && !autocompleteDropdown.contains(e.target)) {
                    autocompleteDropdown.style.display = 'none';
                }
            });
            
            // Event listeners
            searchBtn.addEventListener('click', searchTeam);
            teamSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    autocompleteDropdown.style.display = 'none';
                    searchTeam();
                }
            });
            
            leagueButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const league = this.getAttribute('data-league');
                    getUpcomingMatches(league);
                });
            });
            
            // Functions
            function normalizeTeamName(input) {
                // Check if input matches any team name or alias
                const inputLower = input.toLowerCase();
                
                for (const team of teamDatabase) {
                    // Check if it matches the canonical name
                    if (team.name.toLowerCase() === inputLower) {
                        return team.name;
                    }
                    
                    // Check if it matches any alias
                    const matchedAlias = team.aliases.find(alias => alias.toLowerCase() === inputLower);
                    if (matchedAlias) {
                        return team.name;
                    }
                }
                
                // If no match found, return original input
                return input;
            }
            
            function searchTeam() {
                let teamName = teamSearchInput.value.trim();
                if (!teamName) return;
                
                // Normalize the team name (resolve aliases to canonical names)
                teamName = normalizeTeamName(teamName);
                
                matchesList.innerHTML = `
                    <div class="loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                `;
                
                fetch('/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `team_name=${encodeURIComponent(teamName)}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        matchesList.innerHTML = `<p class="text-danger">${data.error}</p>`;
                        return;
                    }
                    
                    displayMatches(data.matches);
                })
                .catch(error => {
                    console.error('Error:', error);
                    matchesList.innerHTML = `<p class="text-danger">Error searching for team: ${error.message}</p>`;
                });
            }
            
            function getUpcomingMatches(league) {
                matchesList.innerHTML = `
                    <div class="loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                `;
                
                fetch(`/upcoming?league=${encodeURIComponent(league)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        matchesList.innerHTML = `<p class="text-danger">${data.error}</p>`;
                        return;
                    }
                    
                    displayMatches(data.matches);
                })
                .catch(error => {
                    console.error('Error:', error);
                    matchesList.innerHTML = `<p class="text-danger">Error getting upcoming matches: ${error.message}</p>`;
                });
            }
            
            function displayMatches(matches, filterArbitrage = false) {
                if (!matches || matches.length === 0) {
                    matchesList.innerHTML = `<p class="text-center text-muted">No matches found</p>`;
                    return;
                }
                
                // Store full matches data globally (never overwrite with filtered)
                if (!window.currentMatches || !filterArbitrage) {
                    window.currentMatches = matches;
                }
                
                // Filter for arbitrage if requested
                let filteredMatches = matches;
                if (filterArbitrage) {
                    filteredMatches = matches.filter(match => 
                        match.predictions && 
                        match.predictions.arbitrage && 
                        match.predictions.arbitrage.is_arbitrage
                    );
                }
                
                const arbitrageCount = matches.filter(match => 
                    match.predictions && 
                    match.predictions.arbitrage && 
                    match.predictions.arbitrage.is_arbitrage
                ).length;
                
                const popularTeams = [
                    'Bayern M√ºnchen', 'Paris Saint-Germain', 'Arsenal', 'Real Madrid', 'Liverpool FC',
                    'Barcelona', 'Chelsea FC', 'Manchester City', 'Inter Milan', 'Borussia Dortmund',
                    'Atl√©tico Madrid', 'SSC Napoli', 'Palmeiras', 'AS Roma', 'Crystal Palace',
                    'Atalanta', 'Aston Villa', 'Newcastle United', 'Bayer Leverkusen', 'AC Milan',
                    'Sporting', 'Villarreal', 'Juventus', 'Flamengo', 'PSV Eindhoven',
                    'Brighton & Hove Albion', 'Galatasaray', 'Benfica', 'AFC Bournemouth', 'Real Betis',
                    'Tottenham Hotspur', 'FC Porto', 'Eintracht Frankfurt', 'Feyenoord', 'Marseille',
                    'Everton FC', 'Lille', 'RB Leipzig', 'Club Brugge', 'Slavia Prague',
                    'Union St.Gilloise', 'Olympiakos', 'Lyon', 'Lazio', 'Al Hilal',
                    'FK Red Star Belgrade', 'Brentford FC', 'Bologna', 'Athletic Bilbao', 'Manchester United'
                ];
                
                // Add filter UI
                let filterHtml = `
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="arbitrage-filter" ${filterArbitrage ? 'checked' : ''} onchange="toggleArbitrageFilter(this.checked)">
                            <label class="form-check-label" for="arbitrage-filter">
                                üí∞ Show only arbitrage opportunities
                            </label>
                        </div>
                        <small class="text-muted">
                            ${filterArbitrage ? 
                                `Showing ${filteredMatches.length} of ${matches.length} matches` : 
                                `${arbitrageCount} arbitrage ${arbitrageCount === 1 ? 'opportunity' : 'opportunities'} found`
                            }
                        </small>
                    </div>
                `;
                
                let html = filterHtml;
                filteredMatches.forEach((match, filteredIndex) => {
                    const homeTeam = match.home_team.toLowerCase();
                    const awayTeam = match.away_team.toLowerCase();
                    const isPopular = popularTeams.some(team => 
                        homeTeam.includes(team.toLowerCase()) || awayTeam.includes(team.toLowerCase())
                    );
                    const hasArbitrage = match.predictions && 
                                       match.predictions.arbitrage && 
                                       match.predictions.arbitrage.is_arbitrage;
                    const popularClass = isPopular ? ' popular-match' : '';
                    const arbitrageClass = hasArbitrage ? ' arbitrage-match' : '';
                    
                    // Find the original index in the full matches array
                    const originalIndex = matches.findIndex(m => 
                        m.home_team === match.home_team && 
                        m.away_team === match.away_team && 
                        m.commence_time === match.commence_time
                    );
                    
                    html += `
                        <div class="card match-card mb-2${popularClass}${arbitrageClass}" data-match-index="${originalIndex}">
                            <div class="card-body p-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <div class="fw-bold">${match.home_team} vs ${match.away_team}</div>
                                        <div class="small text-muted">${match.league || 'Unknown League'}</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="small text-muted">${match.datetime || 'TBD'}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                matchesList.innerHTML = html;
                
                // Add click event to match cards
                document.querySelectorAll('.match-card').forEach(card => {
                    card.addEventListener('click', function() {
                        const matchIndex = parseInt(this.getAttribute('data-match-index'));
                        displayMatchPredictions(window.currentMatches[matchIndex]);
                    });
                });
            }
            
            function toggleArbitrageFilter(isChecked) {
                if (window.currentMatches) {
                    displayMatches(window.currentMatches, isChecked);
                }
            }
            
            // Make function available globally for inline onclick handler
            window.toggleArbitrageFilter = toggleArbitrageFilter;
            
            function displayMatchPredictions(match) {
                // Show prediction container
                predictionContainer.style.display = 'block';
                
                // Store current match data
                currentMatchData = match;
                
                // Update match details
                matchTeams.textContent = `${match.home_team} vs ${match.away_team}`;
                matchLeague.textContent = match.league || 'Unknown League';
                matchDate.textContent = match.datetime || 'TBD';
                
                // Load match context
                loadMatchContext(match);
                
                // Display predictions from Odds API
                if (match.predictions && match.predictions['1x2']) {
                    display1X2Prediction(match.predictions['1x2']);
                    resetOverUnderButton();
                    resetBettingAnalysisButton();
                } else {
                    prediction1x2.innerHTML = '<p class="text-muted">No predictions available for this match</p>';
                    resetOverUnderButton();
                    resetBettingAnalysisButton();
                }
            }
            
            function resetOverUnderButton() {
                predictionOverUnder.innerHTML = `
                    <div class="text-center">
                        <button onclick="loadOverUnderPredictions()" class="btn btn-primary">
                            <i class="fas fa-chart-bar me-2"></i> Show Over/Under Odds
                        </button>
                        <p class="text-muted mt-2 small">Click to fetch detailed over/under predictions from bookmakers</p>
                    </div>
                `;
            }
            
            function loadOverUnderPredictions() {
                console.log('loadOverUnderPredictions called');
                console.log('currentMatchData:', currentMatchData);
                
                if (!currentMatchData) {
                    console.error('No currentMatchData available');
                    predictionOverUnder.innerHTML = '<p class="text-danger">No match data available</p>';
                    return;
                }
                
                predictionOverUnder.innerHTML = loadingSpinner();
                
                const eventId = currentMatchData.event_id;
                const sportKey = currentMatchData.sport_key;
                
                console.log('eventId:', eventId, 'sportKey:', sportKey);
                
                if (!eventId || !sportKey) {
                    predictionOverUnder.innerHTML = '<p class="text-danger">Unable to load over/under odds for this match (missing event_id or sport_key)</p>';
                    return;
                }
                
                const url = `/match/${eventId}/totals?sport_key=${sportKey}`;
                console.log('Fetching:', url);
                
                fetch(url)
                .then(response => {
                    console.log('Response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('Response data:', data);
                    if (data.error) {
                        predictionOverUnder.innerHTML = `<p class="text-danger">${data.error}</p>`;
                        return;
                    }
                    
                    displayTotalsData(data.totals);
                })
                .catch(error => {
                    console.error('Error fetching over/under:', error);
                    predictionOverUnder.innerHTML = `<p class="text-danger">Failed to load over/under odds: ${error.message}</p>`;
                });
            }
            
            // Make function available globally for inline onclick handler
            window.loadOverUnderPredictions = loadOverUnderPredictions;
            
            function resetBettingAnalysisButton() {
                bettingAnalysis.innerHTML = `
                    <div class="text-center">
                        <button onclick="loadBettingAnalysis()" class="btn btn-primary">
                            <i class="fas fa-coins me-2"></i> Show Betting Analysis
                        </button>
                        <p class="text-muted mt-2 small">View arbitrage opportunities, best odds, and betting tips</p>
                    </div>
                `;
            }
            
            function loadBettingAnalysis() {
                if (!currentMatchData) {
                    bettingAnalysis.innerHTML = '<p class="text-danger">No match data available</p>';
                    return;
                }
                
                bettingAnalysis.innerHTML = loadingSpinner();
                
                // Call the existing display function with current match data
                displayOddsBasedAnalysis(currentMatchData);
            }
            
            // Make function available globally for inline onclick handler
            window.loadBettingAnalysis = loadBettingAnalysis;
            
            function displayTotalsData(totalsData) {
                if (!totalsData || !totalsData.predictions || totalsData.predictions.length === 0) {
                    predictionOverUnder.innerHTML = '<p class="text-muted">No over/under odds available for this match</p>';
                    return;
                }
                
                let html = `<div class="row">`;
                
                totalsData.predictions.forEach(prediction => {
                    const safetyClass = prediction.confidence >= 60 ? 'safe-bet' : 'risky-bet';
                    const safetyText = prediction.confidence >= 60 ? 'Confident' : 'Lower Confidence';
                    
                    const enhancedInfo = prediction.enhanced && prediction.lines_used ? 
                        `<p class="text-info small mt-2"><i class="fas fa-info-circle me-1"></i>Enhanced calculation using ${prediction.lines_used.join(', ')} goal lines from ${prediction.bookmaker_count} bookmakers</p>` : 
                        '';
                    
                    html += `
                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-header bg-secondary text-white">
                                    Over/Under ${prediction.line} Goals
                                </div>
                                <div class="card-body">
                                    <div class="text-center mb-3">
                                        <span class="prediction-badge ${safetyClass}">
                                            ${prediction.prediction} (${prediction.confidence}%)
                                            <i class="fas ${prediction.confidence >= 60 ? 'fa-shield-alt' : 'fa-exclamation-triangle'} ms-1"></i>
                                            ${safetyText}
                                        </span>
                                    </div>
                                    
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Over ${prediction.line}:</span>
                                            <span>${(prediction.probabilities.over * 100).toFixed(1)}%</span>
                                        </div>
                                        <div class="probability-bar">
                                            <div class="probability-fill" style="width: ${prediction.probabilities.over * 100}%; background-color: #0ea5e9;"></div>
                                        </div>
                                        ${prediction.best_odds.over ? `<small class="text-muted">Best odds: ${prediction.best_odds.over.price.toFixed(2)} (${prediction.best_odds.over.bookmaker})</small>` : ''}
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Under ${prediction.line}:</span>
                                            <span>${(prediction.probabilities.under * 100).toFixed(1)}%</span>
                                        </div>
                                        <div class="probability-bar">
                                            <div class="probability-fill" style="width: ${prediction.probabilities.under * 100}%; background-color: #64748b;"></div>
                                        </div>
                                        ${prediction.best_odds.under ? `<small class="text-muted">Best odds: ${prediction.best_odds.under.price.toFixed(2)} (${prediction.best_odds.under.bookmaker})</small>` : ''}
                                    </div>
                                    ${enhancedInfo || `<p class="text-muted small mt-2">${prediction.bookmaker_count} bookmakers</p>`}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
                predictionOverUnder.innerHTML = html;
            }
            
            function loadMatchContext(match) {
                if (!match || !match.league) {
                    matchContext.innerHTML = '<p class="text-muted">Match context unavailable</p>';
                    return;
                }
                
                matchContext.innerHTML = loadingSpinner();
                
                const leagueMap = {
                    'UEFA Champions League': 'CL',
                    'EPL': 'PL',
                    'Premier League': 'PL',
                    'English Premier League': 'PL',
                    'La Liga': 'PD',
                    'Spanish La Liga': 'PD',
                    'Spain La Liga': 'PD',
                    'Bundesliga': 'BL1',
                    'German Bundesliga': 'BL1',
                    'Germany Bundesliga': 'BL1',
                    'Serie A': 'SA',
                    'Italian Serie A': 'SA',
                    'Italy Serie A': 'SA',
                    'Ligue 1': 'FL1',
                    'French Ligue 1': 'FL1',
                    'France Ligue 1': 'FL1',
                    'Ligue 1 - France': 'FL1',
                    'UEFA Europa League': 'EL'
                };
                
                const leagueCode = leagueMap[match.league] || match.league;
                
                fetch(`/match/${match.id}/context?league=${leagueCode}&home_team=${encodeURIComponent(match.home_team)}&away_team=${encodeURIComponent(match.away_team)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        matchContext.innerHTML = `<p class="text-muted">${data.narrative || 'Context unavailable'}</p>`;
                        return;
                    }
                    
                    displayMatchContextData(data);
                })
                .catch(error => {
                    console.error('Error loading context:', error);
                    matchContext.innerHTML = '<p class="text-muted">Unable to load match context</p>';
                });
            }
            
            function formatFormIndicators(formString) {
                if (!formString) return '';
                
                const formArray = formString.split('');
                return formArray.map(result => {
                    let className = '';
                    let bgColor = '';
                    
                    if (result === 'W') {
                        bgColor = '#28a745'; // Green
                    } else if (result === 'D') {
                        bgColor = '#6c757d'; // Gray
                    } else if (result === 'L') {
                        bgColor = '#dc3545'; // Red
                    }
                    
                    return `<span style="display: inline-block; width: 24px; height: 24px; background-color: ${bgColor}; color: white; text-align: center; line-height: 24px; font-size: 12px; font-weight: bold; border-radius: 3px; margin: 0 2px;">${result}</span>`;
                }).join('');
            }
            
            function displayMatchContextData(contextData) {
                let html = '';
                
                if (contextData.narrative) {
                    const alertClass = contextData.has_data ? 'alert-info' : 'alert-warning';
                    const icon = contextData.has_data ? 'fa-info-circle' : 'fa-exclamation-triangle';
                    html += `<div class="alert ${alertClass} mb-3 small"><i class="fas ${icon} me-2"></i>${contextData.narrative}</div>`;
                }
                
                const hasHomeData = contextData.home_team && (contextData.home_team.position || contextData.home_team.points || contextData.home_team.form);
                const hasAwayData = contextData.away_team && (contextData.away_team.position || contextData.away_team.points || contextData.away_team.form);
                
                if (hasHomeData || hasAwayData) {
                    html += `<div class="row">`;
                    
                    // Home team column
                    html += `<div class="col-md-6 ${hasAwayData ? 'border-end' : ''}">`;
                    html += `<h6 class="fw-bold text-primary mb-2"><i class="fas fa-home me-1"></i>${currentMatchData.home_team}</h6>`;
                    
                    if (hasHomeData) {
                        html += `<table class="table table-sm table-borderless mb-0"><tbody>`;
                        if (contextData.home_team.position) {
                            html += `<tr><td class="text-muted" style="width: 80px;">Position:</td><td><span class="badge bg-secondary">${contextData.home_team.position}</span></td></tr>`;
                        }
                        if (contextData.home_team.points !== null && contextData.home_team.points !== undefined) {
                            html += `<tr><td class="text-muted">Points:</td><td><strong>${contextData.home_team.points}</strong></td></tr>`;
                        }
                        if (contextData.home_team.form) {
                            html += `<tr><td class="text-muted">Form:</td><td>${formatFormIndicators(contextData.home_team.form)}</td></tr>`;
                        }
                        html += `</tbody></table>`;
                    } else {
                        html += `<p class="text-muted small"><i>No standings data available</i></p>`;
                    }
                    html += `</div>`;
                    
                    // Away team column
                    html += `<div class="col-md-6">`;
                    html += `<h6 class="fw-bold text-danger mb-2"><i class="fas fa-plane-departure me-1"></i>${currentMatchData.away_team}</h6>`;
                    
                    if (hasAwayData) {
                        html += `<table class="table table-sm table-borderless mb-0"><tbody>`;
                        if (contextData.away_team.position) {
                            html += `<tr><td class="text-muted" style="width: 80px;">Position:</td><td><span class="badge bg-secondary">${contextData.away_team.position}</span></td></tr>`;
                        }
                        if (contextData.away_team.points !== null && contextData.away_team.points !== undefined) {
                            html += `<tr><td class="text-muted">Points:</td><td><strong>${contextData.away_team.points}</strong></td></tr>`;
                        }
                        if (contextData.away_team.form) {
                            html += `<tr><td class="text-muted">Form:</td><td>${formatFormIndicators(contextData.away_team.form)}</td></tr>`;
                        }
                        html += `</tbody></table>`;
                    } else {
                        html += `<p class="text-muted small"><i>No standings data available</i></p>`;
                    }
                    html += `</div>`;
                    
                    html += `</div>`;
                }
                
                matchContext.innerHTML = html;
            }
            
            function display1X2Prediction(prediction) {
                if (!prediction) {
                    prediction1x2.innerHTML = `<p class="text-muted">No prediction available</p>`;
                    return;
                }
                
                const safetyClass = prediction.is_safe_bet ? 'safe-bet' : 'risky-bet';
                const safetyText = prediction.is_safe_bet ? 'Safe Bet' : 'Risky Bet';
                
                let html = `
                    <div class="text-center mb-3">
                        <span class="prediction-badge ${safetyClass}">
                            ${prediction.prediction} (${(prediction.confidence * 100).toFixed(1)}%)
                            <i class="fas ${prediction.is_safe_bet ? 'fa-shield-alt' : 'fa-exclamation-triangle'} ms-1"></i>
                            ${safetyText}
                        </span>
                    </div>
                    
                    <div class="mt-3">
                        <h6>Probability Breakdown:</h6>
                        <div class="mb-2">
                            <div class="d-flex justify-content-between">
                                <span>Home Win:</span>
                                <span>${(prediction.probabilities.HOME_WIN * 100).toFixed(1)}%</span>
                            </div>
                            <div class="probability-bar">
                                <div class="probability-fill" style="width: ${prediction.probabilities.HOME_WIN * 100}%; background-color: #1e3a8a;"></div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <div class="d-flex justify-content-between">
                                <span>Draw:</span>
                                <span>${(prediction.probabilities.DRAW * 100).toFixed(1)}%</span>
                            </div>
                            <div class="probability-bar">
                                <div class="probability-fill" style="width: ${prediction.probabilities.DRAW * 100}%; background-color: #64748b;"></div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <div class="d-flex justify-content-between">
                                <span>Away Win:</span>
                                <span>${(prediction.probabilities.AWAY_WIN * 100).toFixed(1)}%</span>
                            </div>
                            <div class="probability-bar">
                                <div class="probability-fill" style="width: ${prediction.probabilities.AWAY_WIN * 100}%; background-color: #0ea5e9;"></div>
                            </div>
                        </div>
                    </div>
                `;
                
                prediction1x2.innerHTML = html;
            }
            
            function displayOverUnderPredictions(predictions) {
                if (!predictions) {
                    predictionOverUnder.innerHTML = `<p class="text-muted">No predictions available</p>`;
                    return;
                }
                
                let html = `<div class="row">`;
                
                const thresholds = ['0.5', '1.5', '2.5', '3.5'];
                
                thresholds.forEach(threshold => {
                    const prediction = predictions[threshold];
                    if (!prediction) return;
                    
                    const safetyClass = prediction.is_safe_bet ? 'safe-bet' : 'risky-bet';
                    const safetyText = prediction.is_safe_bet ? 'Safe Bet' : 'Risky Bet';
                    
                    html += `
                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-header bg-secondary text-white">
                                    Over/Under ${threshold}
                                </div>
                                <div class="card-body">
                                    <div class="text-center mb-3">
                                        <span class="prediction-badge ${safetyClass}">
                                            ${prediction.prediction} (${(prediction.confidence * 100).toFixed(1)}%)
                                            <i class="fas ${prediction.is_safe_bet ? 'fa-shield-alt' : 'fa-exclamation-triangle'} ms-1"></i>
                                            ${safetyText}
                                        </span>
                                    </div>
                                    
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Over:</span>
                                            <span>${(prediction.probabilities.OVER * 100).toFixed(1)}%</span>
                                        </div>
                                        <div class="probability-bar">
                                            <div class="probability-fill" style="width: ${prediction.probabilities.OVER * 100}%; background-color: #0ea5e9;"></div>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex justify-content-between">
                                            <span>Under:</span>
                                            <span>${(prediction.probabilities.UNDER * 100).toFixed(1)}%</span>
                                        </div>
                                        <div class="probability-bar">
                                            <div class="probability-fill" style="width: ${prediction.probabilities.UNDER * 100}%; background-color: #64748b;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
                
                predictionOverUnder.innerHTML = html;
            }
            
            function generateBettingTips(pred1x2) {
                if (!pred1x2.probabilities) {
                    return '';
                }
                
                const probs = pred1x2.probabilities;
                const homeWin = probs.home_win || 0;
                const draw = probs.draw || 0;
                const awayWin = probs.away_win || 0;
                
                // Calculate double chance probabilities
                const dc1X = homeWin + draw;  // Home or Draw
                const dc12 = homeWin + awayWin;  // Home or Away
                const dcX2 = draw + awayWin;  // Draw or Away
                
                // Create array of betting options
                const options = [
                    { name: 'Home Win', prob: homeWin, type: 'single' },
                    { name: 'Draw', prob: draw, type: 'single' },
                    { name: 'Away Win', prob: awayWin, type: 'single' },
                    { name: 'Double Chance 1X (Home or Draw)', prob: dc1X, type: 'double_chance' },
                    { name: 'Double Chance 12 (Home or Away)', prob: dc12, type: 'double_chance' },
                    { name: 'Double Chance X2 (Draw or Away)', prob: dcX2, type: 'double_chance' }
                ];
                
                // Sort by probability
                options.sort((a, b) => b.prob - a.prob);
                
                // Find safest, balanced, and risky bets
                const safest = options.find(opt => opt.prob >= 0.60);
                const balanced = options.find(opt => opt.prob >= 0.30 && opt.prob < 0.60);
                const risky = options.find(opt => opt.prob >= 0.15 && opt.prob < 0.30);
                
                let html = '<div class="analysis-section mb-3">';
                html += '<div class="analysis-title">üí° Betting Tips</div>';
                
                if (safest) {
                    html += `
                        <div class="alert alert-success mb-2">
                            <strong>üõ°Ô∏è SAFEST BET:</strong> ${safest.name}
                            <br><span class="badge bg-success">${(safest.prob * 100).toFixed(1)}% probability</span>
                            <br><small class="text-muted">Lower odds but highest chance of winning</small>
                        </div>
                    `;
                }
                
                if (balanced) {
                    html += `
                        <div class="alert alert-info mb-2">
                            <strong>‚öñÔ∏è BALANCED BET:</strong> ${balanced.name}
                            <br><span class="badge bg-info">${(balanced.prob * 100).toFixed(1)}% probability</span>
                            <br><small class="text-muted">Moderate odds with reasonable chance</small>
                        </div>
                    `;
                }
                
                if (risky) {
                    html += `
                        <div class="alert alert-warning mb-2">
                            <strong>üé≤ VALUE BET:</strong> ${risky.name}
                            <br><span class="badge bg-warning text-dark">${(risky.prob * 100).toFixed(1)}% probability</span>
                            <br><small class="text-muted">Higher odds but lower probability</small>
                        </div>
                    `;
                }
                
                html += '</div>';
                return html;
            }
            
            function displayOddsBasedAnalysis(match) {
                const predictions = match.predictions || {};
                const pred1x2 = predictions['1x2'] || {};
                const bestOdds = predictions.best_odds || {};
                const arbitrage = predictions.arbitrage || null;
                
                let html = '<div class="analysis-section mb-3">';
                html += '<div class="analysis-title">üìä Market Data</div>';
                html += `<p><strong>Bookmakers:</strong> ${pred1x2.bookmaker_count || 0} bookmakers providing odds</p>`;
                html += '</div>';
                
                if (bestOdds.home || bestOdds.draw || bestOdds.away) {
                    html += '<div class="analysis-section mb-3">';
                    html += '<div class="analysis-title">üí∞ Best Odds</div>';
                    if (bestOdds.home && bestOdds.home.price) {
                        html += `<p><strong>Home Win:</strong> ${bestOdds.home.price.toFixed(2)} at ${bestOdds.home.bookmaker}</p>`;
                    }
                    if (bestOdds.draw && bestOdds.draw.price) {
                        html += `<p><strong>Draw:</strong> ${bestOdds.draw.price.toFixed(2)} at ${bestOdds.draw.bookmaker}</p>`;
                    }
                    if (bestOdds.away && bestOdds.away.price) {
                        html += `<p><strong>Away Win:</strong> ${bestOdds.away.price.toFixed(2)} at ${bestOdds.away.bookmaker}</p>`;
                    }
                    html += '</div>';
                }
                
                if (arbitrage && arbitrage.is_arbitrage) {
                    html += '<div class="analysis-section mb-3" style="border: 2px solid #10b981; background-color: #d1fae5;">';
                    html += '<div class="analysis-title" style="color: #10b981;">‚úÖ Arbitrage Opportunity!</div>';
                    html += `<p><strong>Profit Margin:</strong> ${arbitrage.profit_margin}%</p>`;
                    html += `<p><strong>Optimal Stakes (per $100):</strong></p>`;
                    html += `<ul style="list-style: none; padding-left: 0;">`;
                    
                    if (arbitrage.best_odds && arbitrage.best_odds.home) {
                        html += `<li class="mb-2">üí∞ <strong>Home:</strong> $${arbitrage.stakes.home} @ <span class="text-primary">${arbitrage.best_odds.home.bookmaker}</span> <span class="badge bg-secondary">${arbitrage.best_odds.home.price.toFixed(2)}</span></li>`;
                    }
                    if (arbitrage.best_odds && arbitrage.best_odds.draw) {
                        html += `<li class="mb-2">üí∞ <strong>Draw:</strong> $${arbitrage.stakes.draw} @ <span class="text-primary">${arbitrage.best_odds.draw.bookmaker}</span> <span class="badge bg-secondary">${arbitrage.best_odds.draw.price.toFixed(2)}</span></li>`;
                    }
                    if (arbitrage.best_odds && arbitrage.best_odds.away) {
                        html += `<li class="mb-2">üí∞ <strong>Away:</strong> $${arbitrage.stakes.away} @ <span class="text-primary">${arbitrage.best_odds.away.bookmaker}</span> <span class="badge bg-secondary">${arbitrage.best_odds.away.price.toFixed(2)}</span></li>`;
                    }
                    
                    html += `</ul>`;
                    html += `<p class="small text-muted mt-3"><i class="fas fa-info-circle me-1"></i>Guaranteed profit: $${arbitrage.profit_margin} per $100 wagered</p>`;
                    html += '</div>';
                }
                
                // Add Betting Tips
                html += generateBettingTips(pred1x2);
                
                bettingAnalysis.innerHTML = html;
            }
            
            function displayBettingAnalysis(match) {
                const analysis = match.betting_analysis || {};
                
                if (Object.keys(analysis).length === 0) {
                    bettingAnalysis.innerHTML = `<p class="text-muted">No betting analysis available</p>`;
                    return;
                }
                
                let html = '';
                
                for (const [title, content] of Object.entries(analysis)) {
                    html += `
                        <div class="analysis-section mb-3">
                            <div class="analysis-title">${title}</div>
                            <div>${content}</div>
                        </div>
                    `;
                }
                
                bettingAnalysis.innerHTML = html;
            }
            
            function loadingSpinner() {
                return `
                    <div class="loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                `;
            }
            
            // Auto-load popular upcoming matches on page load
            getUpcomingMatches('CL');
        });
    </script>
</body>
</html>
